<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script src="auth.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TimeCapsule.AI</title>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="homepage-body">
  
  <div id="shader-container"></div>
  <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="position:absolute; overflow:hidden;">
    <defs><filter id="glass-distortion"><feTurbulence type="fractalNoise" baseFrequency="0.008 0.008" numOctaves="2" seed="92" result="noise"></feTurbulence><feGaussianBlur in="noise" stdDeviation="2" result="blurred"></feGaussianBlur><feDisplacementMap in="SourceGraphic" in2="blurred" scale="80" xChannelSelector="R" yChannelSelector="G"></feDisplacementMap></filter></defs>
  </svg>
  <div id="liquid-glass-cursor"></div>

  <nav class="navbar">
    <a class="navbar-brand" href="index.html">
      <img src="images/home_button.jpg" alt="Home Button" title="Home">
    </a>
    <button id="logout-button" class="btn btn-outline-danger">Logout</button>
  </nav>

  <main class="content-wrapper">
    <h1>TimeCapsule.AI</h1>
    <p>
      Preserve your memories. Unlock your emotions. Store text, voice, and photos in capsules that you can unlock in the future.  
      Make every memory timeless.
    </p>
    <div class="button-group">
      <button class="hero-button hero-button-primary" onclick="window.location.href='add_capsule.html'">
        Add TimeCapsule
      </button>
      <button class="hero-button hero-button-secondary" onclick="window.location.href='review.html'">
        Review Capsules
      </button>
    </div>
  </main>
  
  <script>
    const glass = document.getElementById('liquid-glass-cursor');
    const glassWidth = 120; const glassHeight = 120;
    document.body.addEventListener('mouseenter', () => gsap.to(glass, { duration: 0.5, opacity: 1, ease: 'power2.out' }));
    window.addEventListener("mousemove", (e) => {
      const posX = e.clientX - glassWidth / 2;
      const posY = e.clientY - glassHeight / 2;
      gsap.to(glass, { duration: 0.6, left: posX, top: posY, ease: "power2.out" });
    });
    const container = document.getElementById('shader-container');
    if (container) {
      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setPixelRatio(window.devicePixelRatio);
      container.appendChild(renderer.domElement);
      const scene = new THREE.Scene();
      const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
      const clock = new THREE.Clock();
      const vertexShader = `void main() { gl_Position = vec4(position, 1.0); }`;
      const fragmentShader = `precision highp float; uniform vec2 iResolution; uniform float iTime; uniform vec2 iMouse; void main() { vec2 uv = (gl_FragCoord.xy - 0.5 * iResolution.xy) / iResolution.y; vec2 mouse = (iMouse - 0.5 * iResolution.xy) / iResolution.y; float t = iTime * 0.2; float mouseDist = length(uv - mouse); float warp = sin(mouseDist * 20.0 - t * 4.0) * 0.1; warp *= smoothstep(0.4, 0.0, mouseDist); uv += warp; vec2 gridUv = abs(fract(uv * 10.0) - 0.5); float line = pow(1.0 - min(gridUv.x, gridUv.y), 50.0); vec3 gridColor = vec3(0.1, 0.5, 1.0); vec3 color = gridColor * line * (0.5 + sin(t * 2.0) * 0.2); float energy = sin(uv.x * 20.0 + t * 5.0) * sin(uv.y * 20.0 + t * 3.0); energy = smoothstep(0.8, 1.0, energy); color += vec3(1.0, 0.2, 0.8) * energy * line; float glow = smoothstep(0.1, 0.0, mouseDist); color += vec3(1.0) * glow * 0.5; gl_FragColor = vec4(color, 1.0); }`;
      const uniforms = { iTime: { value: 0 }, iResolution: { value: new THREE.Vector2() }, iMouse: { value: new THREE.Vector2(window.innerWidth / 2, window.innerHeight / 2) } };
      const material = new THREE.ShaderMaterial({ vertexShader, fragmentShader, uniforms });
      const geometry = new THREE.PlaneGeometry(2, 2);
      const mesh = new THREE.Mesh(geometry, material);
      scene.add(mesh);
      const onResize = () => { const width = container.clientWidth; const height = container.clientHeight; renderer.setSize(width, height); uniforms.iResolution.value.set(width, height); };
      window.addEventListener('resize', onResize);
      onResize();
      window.addEventListener('mousemove', (e) => uniforms.iMouse.value.set(e.clientX, window.innerHeight - e.clientY));
      renderer.setAnimationLoop(() => { uniforms.iTime.value = clock.getElapsedTime(); renderer.render(scene, camera); });
    }
  </script>
  <script>
    document.getElementById('logout-button').addEventListener('click', () => {
        localStorage.removeItem('token');
        window.location.href = 'login.html';
    });
  </script>
</body>
</html>
